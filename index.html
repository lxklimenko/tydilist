<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker 2026</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            /* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤ Telegram (–∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ —Ç–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) */
            --bg-color: var(--tg-theme-bg-color, #1c1c1e);
            --text-color: var(--tg-theme-text-color, #ffffff);
            --hint-color: var(--tg-theme-hint-color, #999999);
            --button-color: var(--tg-theme-button-color, #2ea6ff);
            --button-text-color: var(--tg-theme-button-text-color, #ffffff);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #2c2c2e);
            --header-bg: var(--tg-theme-header-bg-color, #1c1c1e);
            
            /* –¢–≤–æ–∏ –∞–∫—Ü–µ–Ω—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ */
            --success-green: #34c759;
            --danger-red: #ff3b30;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é */
        }

        .container {
            padding: 16px;
            display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }

        .container.active {
            display: block; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é */
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h2 { font-size: 20px; margin-top: 0; margin-bottom: 12px; }
        h3 { font-size: 16px; margin-top: 0; margin-bottom: 8px; color: var(--hint-color); }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã */
        .form-group { margin-bottom: 16px; }
        label { display: block; margin-bottom: 8px; font-weight: 500; }
        
        input[type="text"], input[type="number"], textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 16px;
        }

        /* –ß–µ–∫–±–æ–∫—Å—ã –≤ —Å—Ç–∏–ª–µ iOS */
        .checkbox-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-color);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--success-green); }
        input:checked + .slider:before { transform: translateX(20px); }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä—ã */
        .progress-container {
            width: 100%;
            background-color: var(--bg-color);
            border-radius: 8px;
            height: 20px;
            margin-top: 8px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--button-color);
            text-align: center;
            line-height: 20px;
            color: white;
            font-size: 12px;
            width: 0%; /* –ë—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è JS */
            transition: width 0.5s;
        }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .tab-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: var(--header-bg);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid var(--secondary-bg);
        }
        .tab-btn {
            background: none;
            border: none;
            color: var(--hint-color);
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }
        .tab-btn.active { color: var(--button-color); }
        .tab-icon { font-size: 24px; margin-bottom: 4px; }

    </style>
</head>
<body>

    <div id="tab-daily" class="container active">
        <div class="card" style="text-align: center;">
            <h3>–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</h3>
            <h1 style="font-size: 48px; margin: 0; color: var(--success-green);">0</h1>
            <p style="margin-bottom: 0;">–ù–∏ —à–∞–≥—É –Ω–∞–∑–∞–¥!</p>
        </div>

        <div class="card">
            <h2>–ß–µ–∫-–ª–∏—Å—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
            
            <div class="checkbox-wrapper">
                <span>QA: —É—á–µ–±–∞ (20-30 –º–∏–Ω)</span>
                <label class="switch">
                    <input type="checkbox" id="qaCheck">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="checkbox-wrapper">
                <span>–î–µ–Ω—å–≥–∏: –¥–µ–π—Å—Ç–≤–∏—è (10-20 –º–∏–Ω)</span>
                <label class="switch">
                    <input type="checkbox" id="moneyCheck">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="card">
            <h2>–û—Ç—á–µ—Ç</h2>
            <div class="form-group">
                <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π / –í—ã–≤–æ–¥ –¥–Ω—è</label>
                <textarea id="dailyComment" rows="3" placeholder="–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ?"></textarea>
            </div>
            <div class="form-group">
                <label>–ë–∞–ª–∞–Ω—Å –Ω–∞ –∏–ø–æ—Ç–µ–∫—É (–æ–±–Ω–æ–≤–∏—Ç—å)</label>
                <input type="number" id="mortgageBalance" placeholder="‚ÇΩ">
            </div>
        </div>
    </div>

    <div id="tab-finance" class="container">
        <div class="card">
            <h2>–î–æ–ª–≥–∏ (Ozon)</h2>
            <div style="display: flex; justify-content: space-between;">
                <span>–û—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞:</span>
                <span style="font-weight: bold;">11 862 ‚ÇΩ</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 70%; background-color: var(--danger-red);">70%</div>
            </div>
            <p style="font-size: 12px; color: var(--hint-color); margin-top: 8px;">*–î–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã</p>
        </div>
    </div>

    <div id="tab-goals" class="container">
        <div class="card">
            <h2>–Ø–Ω–≤–∞—Ä—å: –¶–µ–ª—å 60 000 ‚ÇΩ</h2>
            
            <label>–û—Å–Ω. –¥–æ—Ö–æ–¥ + –î–æ–ø. –¥–æ—Ö–æ–¥</label>
            <div class="progress-container" style="height: 30px;">
                <div class="progress-bar" style="width: 45%; background-color: var(--success-green);">27 000 ‚ÇΩ</div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px;">
                <span>0 ‚ÇΩ</span>
                <span>60 000 ‚ÇΩ</span>
            </div>
        </div>
    </div>

    <div class="tab-bar">
        <button class="tab-btn active" onclick="switchTab('daily', this)">
            <span class="tab-icon">üìÖ</span>
            –°–µ–≥–æ–¥–Ω—è
        </button>
        <button class="tab-btn" onclick="switchTab('finance', this)">
            <span class="tab-icon">üí∞</span>
            –§–∏–Ω–∞–Ω—Å—ã
        </button>
        <button class="tab-btn" onclick="switchTab('goals', this)">
            <span class="tab-icon">üéØ</span>
            –¶–µ–ª–∏
        </button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ (Main Button)
        tg.MainButton.setText("–ó–ê–í–ï–†–®–ò–¢–¨ –î–ï–ù–¨");
        tg.MainButton.show();

        // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabId, btnElement) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
            document.querySelectorAll('.container').forEach(el => el.classList.remove('active'));
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π
            document.getElementById('tab-' + tabId).classList.add('active');

            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            btnElement.classList.add('active');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" —Ç–æ–ª—å–∫–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
            if(tabId === 'daily') {
                tg.MainButton.show();
            } else {
                tg.MainButton.hide();
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É Telegram
        tg.MainButton.onClick(function() {
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            const data = {
                qa_done: document.getElementById('qaCheck').checked,
                money_done: document.getElementById('moneyCheck').checked,
                comment: document.getElementById('dailyComment').value,
                mortgage: document.getElementById('mortgageBalance').value,
                user_id: tg.initDataUnsafe.user?.id
            };

            // ! –ó–î–ï–°–¨ –ë–£–î–ï–¢ –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –í N8N !
            // fetch('–¢–í–û–ô_–í–ï–ë–•–£–ö_N8N', { method: 'POST', body: JSON.stringify(data) })
            
            // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º –∞–ª–µ—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç–∞
            tg.showPopup({
                title: '–¢–µ—Å—Ç',
                message: `–î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã!\nQA: ${data.qa_done}\n–ö–æ–º–º–µ–Ω—Ç: ${data.comment}`,
                buttons: [{type: 'ok'}]
            });
        });

    </script>
</body>
</html>